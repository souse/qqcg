define("pafweblib/loginDialog/1.0.0/loginDialog",["./layout","$","./loginDialog.handlebars","pwdGrd"],function(a,b){function c(a){$("#paf_layout_A #loginForm input[name=returnURL]").val(a.returnUrl),$("#loginMessageTips").html(a.messageTip),$("#paf_layout_A").show()}function d(b){var c=a("./layout"),d=a("./loginDialog.handlebars");new c({contWidth:"800px",contHeight:"300px",contBackColor:"#fff",Html:d(b),callback:function(){function b(){var a=!0;$("#login_refresh_captcha").click(function(){var b=this;return a&&(a=!1,setTimeout(function(){$.ajax({url:"/captcha",dataType:"json",method:"POST"}).done(function(a){var c=$(b),d=$("#"+c.data("id").replace(/[.]/g,"\\.")),e=$("#"+c.data("captchaimg"));e.prop("src",a.img),d.prop("value",a.id)}).always(function(){a=!0})},300)),!1})}function c(){var b=/^(1[^012][0-9]{9})$/i;$("#loginForm").on("submit",function(){return""!==$("#loginForm #accountName").val()&&b.test($("#loginForm #accountName").val())?($("#loginForm #accountNameError").html(""),""===$("#loginForm #pwd").val()?($("#loginForm #pwd").focus(),$("#loginForm #errorMessage").text(),$("#loginForm #pwdError").html("请填写您的登录密码"),!1):($("#loginForm #pwdError").html(""),""===$("#loginCaptcha\\.captchaValue").val()?($("#loginCaptcha\\.captchaValue").focus(),$("#loginCaptcha\\.captchaValueError").html("请输入图片验证码"),!1):($("#loginCaptcha\\.captchaValueError").html(""),void 0))):($("#loginForm #accountName").focus(),$("#loginForm #accountNameError").html("请填写正确的壹钱包账户"),!1)});var c=[],d={id:"pwd",sClass:"AfterPwdActive pafweblib-pwdGrd",iClass:"BeforePwdActive pafweblib-pwdGrd-customized",nextTabId:"captcha.captchaValue"};c.push(d);var e=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];if(0==c.pwdLength())return $("#loginForm #"+c.id).focus(),$("#loginForm #pwdError").html("请填写您的登录密码"),!1}return!0},f=a("pwdGrd");new f({ctrls:c,formSelector:"#loginForm",preSubmitFunc:e,rootPath:window.contextPath})}b(),$("#login_refresh_captcha").click(),c()}})}b.init=function(a){var b=$.extend(!0,{},{returnUrl:window.location.href,messageTip:""},a);$("#paf_layout_A").length>0?c(b):d(b)}}),define("pafweblib/loginDialog/1.0.0/layout",["$"],function(a,b,c){var d=a("$"),e=function(a){this.opts=d.extend(!0,{},e.defaults,a),this.contWidth=this.opts.contWidth,this.contHeight=this.opts.contHeight,this.contBackColor=this.opts.contBackColor,this.title=this.opts.title,this.Html=this.opts.Html,this.callback=this.opts.callback,this.init()};e.prototype={init:function(){var a="color: #666;top: 0;left: 0;width: 100%;height: 100%;position: fixed;z-index: 999;",b="top: 0;left: 0;width: 100%;height: 100%;position: fixed;z-index: -1;background-color: #000;opacity: 0.5;filter: alpha(opacity=50);",c="position: absolute;z-index: 102;left: 50%;top: 50%;border-radius: 4px;overflow: hidden;",e="position: absolute;right: 0px;top:0;z-index: 103;padding: 0px 10px;color: #aaa;font-size: 30px;cursor:pointer;",f=this,g="width: "+f.contWidth+";min-height: "+f.contHeight+";background-color:"+f.contBackColor+";margin-left: -"+parseInt(f.contWidth)/2+"px;margin-top: -"+parseInt(f.contHeight)/2+"px",h='<div style="'+a+'" id="paf_layout_A">'+'<div style="'+b+'"></div>'+'<div style="'+c+g+'">'+'<div id="paf_layout_closeBtn" style="'+e+'">&#215;</div>'+f.Html+"</div>"+"</div>";d("body").append(h),f.bindClick(),f.callback()},bindClick:function(){d("#paf_layout_closeBtn").click(function(){d("#paf_layout_A").hide()})}},e.defaults={contWidth:"600px",contHeight:"300px",contBackColor:"#F7F7F7",Html:"<div>弹出层文本内容</div>",callback:function(){}},c.exports=e}),define("pafweblib/loginDialog/1.0.0/loginDialog.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var f in a.helpers)c[f]=c[f]||a.helpers[f];e=e||{};var g,h="",i="function",j=this.escapeExpression;return h+='<div class="pafweblib-loginDialog">\n	<h1>登录壹钱包</h1>\n	<div class="ContControls">\n				<form method="post" action="/session" class="paf-form" id="loginForm" autocomplete="off">\n					<input type="hidden" name="returnURL" value="',(g=c.returnUrl)?g=g.call(b,{hash:{},data:e}):(g=b.returnUrl,g=typeof g===i?g.apply(b):g),h+=j(g)+'"/>\n					<div class="loginMessageTips" id="loginMessageTips">',(g=c.messageTip)?g=g.call(b,{hash:{},data:e}):(g=b.messageTip,g=typeof g===i?g.apply(b):g),h+=j(g)+'</div>\n                    <div class="control-group ">\n                        <label for="username" class="control-label ">壹钱包账户：</label>\n                        <div class="controls">\n                            <div class="control">\n    							<input type="text" id="accountName" name="accountName" value="" class="">\n                            </div>\n                            <div id="accountNameError" class="loginFormErrors"></div>\n                        </div>\n                    </div>\n                    <div class="control-group">\n                        <label for="password" class="control-label ">登录密码：</label>\n                        <div class="controls">\n                            <div class="control control-password fn-clear">\n                            	<input type="password" id="pwd" name="pwd" value="" class="plugin-encrypted-password" data-required="true" tabIndex="2" style="visibility: visible;">\n								<span class="help-inline">\n                                	<a href="/users/security/forgetPwd" class="forgetPwd frib">忘记密码？</a>\n                                </span>\n                            </div>\n                            <div id="pwdError" class="loginFormErrors"></div>\n                        </div>\n                    </div>\n                    <div class="control-group ">\n                        <label class="control-label " for="captcha.captchaValue">图片验证码：</label>\n                        <div class="controls">\n                            <div class="control control-captcha">\n    							<input type="hidden" id="loginCaptcha.id" name="captcha.id" value="">\n   	 							<input type="text" id="loginCaptcha.captchaValue" name="captcha.captchaValue" value="" class="captcha-input" autocomplete="off">\n                                <img id="loginCaptchaImg" class="captcha-img" src="">\n                                <span class="help-inline">\n                                	<a id="login_refresh_captcha" href="#" class="refresh_captcha" data-id="loginCaptcha.id" data-captchaimg="loginCaptchaImg">看不清？换一张</a>\n                                </span>\n                            </div>\n                            <div id="loginCaptcha.captchaValueError" class="loginFormErrors"></div>\n                        </div>\n                    </div>\n                    <div class="control-group">\n                        <div class="controls fn-clear">\n                            <button type="submit" class="paf-btn paf-btn-primary paf-login-largeBtn">登录</button>\n                        </div>\n                        <div class="controls fn-clear">\n                        	还没有壹钱包账户？\n                            <a href="/users/new/mobile">立即注册</a>\n                        </div>\n                    </div>\n                </form>\n	</div>\n</div>'})});
