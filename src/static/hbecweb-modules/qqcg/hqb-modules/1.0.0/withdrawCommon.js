define("consumer/hqb-modules/1.0.0/withdrawCommon",["$","pafweblib/Validator/0.1.0/Validator","pafweblib/temporary/1.0.0/numeral","PwdGrdModule"],function(a,b,c){function d(a,b){var c=a.closest("div.control-group");c.addClass("control-group-error"),a.closest("div.controls").children("div.help-block").html(b)}var e=a("$"),f=(a("pafweblib/Validator/0.1.0/Validator.js"),a("pafweblib/temporary/1.0.0/numeral"),a("PwdGrdModule")),g=(e("#hqbDrawForm"),e("#maxCtroAmount"),e("#drawAmount"));String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h={init:function(){this.eventHandle(),this.pwdHandle()},eventHandle:function(){g.numeral({scale:2,intlen:6}),g.on("validate",function(a,b){var c=e(this),d=c.val().trim(),f=parseFloat(c.attr("data-limitMaxAmount").trim());return""===d?(b.reject("请输入金额"),!1):(d=parseFloat(d),0>=d?(b.reject("转出金额应高于0元"),!1):d>=f?(b.reject("转出金额应低于"+f+"元"),!1):void 0)}),g.on("blur",function(){var a=e(this),b=a.val().trim();""!=b&&a.val(parseFloat(b))});var a=e("#payPwd");a.on("validate",function(a,b){var c=e(this);c.val().replace(/^\s*|\s*$/g,"").length<6&&b.reject("请输入6位以上的密码")})},pwdHandle:function(){var a=[],b={id:"payPwd",sClass:"pafweblib-pwdGrd pafweblib-pwdGrd-middle",iClass:"pafweblib-pwdGrd pafweblib-pwdGrd-inline"};a.push(b);var c=function(a){e("#formError").hide();var b=g.val().trim(),c=g.closest("div.control-group"),h=parseFloat(g.attr("data-limitMaxAmount").trim());if(c.removeClass("control-group-error"),0==g.closest("div.controls").children("div.help-block").length){var i=e("<div class='help-block'></div>");g.closest("div.controls").children(":last").after(i)}if(""===b)return d(g,"请输入金额"),!1;if(b=parseFloat(b),0>=b)return d(g,"转出金额应高于0元"),!1;if(b>=h)return d(g,"转出金额应低于"+h+"元"),!1;if(a)for(var j=0;j<a.length;j++){var k=a[j],l=k.id;if(e("#"+l).closest(".control-group").removeClass("control-group-error"),0==j&&f.emptyErrors("#"+l),0==k.pwdLength()){e("#"+l).focus();var m={name:"请输入支付密码"};return e("#"+l).closest(".control-group").addClass("control-group-error"),f.renderErrors("#"+l,m,f.WARNING_TYPE.REQUIRED),!1}}return!0};new f({ctrls:a,formSelector:"#hqbDrawForm",preSubmitFunc:c,isMandatory:!0,rootPath:window.staticFileRoot})}};c.exports=h});
