define("pafweblib/Validator/0.1.0/Validator",["$"],function(a,b,c){"use strict";function d(a){var b=a.closest("div.controls").children("div.help-block"),c=a.closest("div.control-group");c.removeClass("control-group-error"),0!==b.length&&b.remove(),a.data("validationContext",{})}function e(a){var b=a.data("validationContext")||{},c=a.closest("div.controls").children("div.help-block"),e=a.closest("div.control-group");if(b){0===c.length&&(c=f("<div/>",{"class":"help-block"}),a.closest("div.controls").children(":last").after(c));var g=0;for(var h in b)++g,c.html(h);g>0&&e.addClass("control-group-error")}else d(a)}var f=a("$"),g=function(a){this.errors={},this.hasErrors=!1,this.el=f(a)};g.prototype.reject=function(a,b){var c=this.el.data("validationContext")||{};this.hasErrors=!0,c[a]=b,this.el.data("validationContext",c)},g.prototype.setError=function(a){this.hasErrors=!0,this.el.data("errorTipInfo",a)},f("body").on("change blur keyup","textarea, input ",function(){var a=f(this);clearTimeout(a.data("validationTimeout")),a.data("validationTimeout",setTimeout(function(){if(a.trigger("beforeValidate"),a.data("validationOldValue")!==a.val()){d(a),a.data("validationOldValue",a.val());var b=new g(a);a.trigger("validate",b),e(a,b),a.trigger("afterValidate",b)}},500))}),f("form").on("click","input[type=submit], input[type=button], button",function(a){return f(this).closest("form").hasClass("submitting")?a.preventDefault():void 0});var h=f(".paf-form");h.on("submit",function(a){var b=h,c=!1;return b.hasClass("submitting")?a.preventDefault():(b.find("textarea, input").each(function(){var a=f(this),b=new g(a);a.trigger("validate",b),e(a,b),b.hasErrors&&(c=!0),a.trigger("afterValidate",b)}),b.trigger("afterValidate",c),c?!1:(b.addClass("submitting"),b.find('button[type="submit"]').text("正在提交，请稍候"),b.find('input[type="submit"]').val("正在提交，请稍候"),void 0))}),c.exports=function(){},c.exports.clearError=d,c.exports.renderError=e});
